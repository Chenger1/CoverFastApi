{% extends "admin/admin_index.html" %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add user</title>
</head>
<body>
{% block content %}
<div style="margin-top: 20px;">
    <div class="mb-3">
        <label for="inputEmail">Email</label>
        <input type="email" class="form-control" id="inputEmail" placeholder="admin@mail.com"
        name="email">
    </div>
    <div class="mb-3">
        <label for="inputUsername" class="form-label">Username</label>
        <input class="form-control" id="inputUsername" placeholder="Username" name="username">
    </div>
    <div class="mb-3">
        <label for="inputPassword" class="form-label">Password</label>
        <input type="password" id="inputPassword" name="password" class="form-control">
    </div>
    <button type="button" class="btn btn-secondary" id="save">Save</button>
</div>

<script src="{{ url_for('static', path='/js/requests.js') }}"></script>
<script>
    let btn = document.getElementById('save');
    btn.addEventListener('click', function(){
        let email = document.getElementsByName('email')[0]
        let username = document.getElementsByName('username')[0]
        let password = document.getElementsByName('password')[0]

        if (email.value != '' && username.value != '' && password.value != ''){
            data = {
                'email': email.value,
                'username': username.value,
                'password': password.value
            }

            send_request(JSON.stringify(data), '/admin/users/add_user')
            window.location.href = '/admin/users'
        }else{
            alert('Some fields are empty');
        }
        this.blur();

    })
</script>
{% endblock %}
</body>
</html>